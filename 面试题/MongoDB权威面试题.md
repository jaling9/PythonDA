<b>更多面试题，干货内容，可以查看此处，从编程工具到面试要点。
全流程编程工具集&学习集 https://www.johngo689.com/2617/，欢迎留言交流！</b> 
<i>以下面试题来自网络以及自己整理，如有侵权，请及时联系删除！</i> 
 *** 
[TOC]

### 1、什么是 MongoDB?
<p>MongoDB 是一个文档数据库，提供好的性能，领先的非关系型数据库。</p><p>采用 BSON 存储文档数据。</p><p>2007 年 10 月，MongoDB 由 10gen 团队所发展。</p><p>2009 年 2 月首度推出。获得安装包和查看详细的 API。</p><p>可以访问官网网址 www.mongodb.com</p>



### 2、MongoDB 是由哪种语言写的?
<p>MongoDB 用 c++编写的，流行的开源数据库 MySQL 也是用 C++开发的。</p><p>C++1983 年发行是一种使用广泛的计算机程序设计语言。</p><p>它是一种通用程序设计语言，支持多重编程模式。</p>



### 3、MongoDB 的优势有哪些?
<p>面向文档的存储:以 JSON 格式的文档保存数据。 </p><p>任何属性都可以建立索引。</p><p>复制以及高可扩展性。</p><p>自动分片。</p><p>丰富的查询功能。</p><p>快速的即时更新。</p>



### 4、mongo-什么是数据库?
<p>数据库可以看成是一个电子化的文件柜，用户可以对文件中的数据运行新增、检索、更新、删除等操作。</p><p>数据库是一个所有集合的容器，在文件系统中每一个数据库都有一个相关的物理文件。</p>



### 5、mongo-什么是集合?
<p>集合就是一组 MongoDB 文档。</p><p>它相当于关系型数据库(RDBMS)中的表这种概念。</p><p>集合位于单独的一个数据库中。</p><p>一个集合内的多个文档可以有多个不同的字段。</p><p>一般来说，集合中的文档都有着相同或相关的目的。</p>



### 6、mongo-什么是文档?
<p>文档由一组 key value 组成。</p><p>文档是动态模式，这意味着同一集合里的文档不需要有相同的字段和结构。</p><p>在关系型数据库中 table 中的每一条记录相当于 MongoDB 中的一个文档。</p>



### 7、什么是“mongod”?
<p>mongod 是处理 MongoDB 系统的主要进程。</p><p>它处理数据请求，管理数据存储，和执行后台管理操作。</p><p>当我们运行 mongod 命令意味着正在启动 MongoDB 进程,并且在后台运行。</p>



### 8、“mongod”参数有什么?
<p>传递数据库存储路径，默认是"/data/db"</p><p>端口号 默认是 "27017"</p>



### 9、什么是“mongo”?
<p>它是一个命令行工具用于连接一个特定的 mongod 实例。</p><p>当我们没有带参数运 行 mongo 命令它将使用默认的端口号和 localhost 连接。</p>



### 10、MongoDB 哪个命令可以切换数据库?
<p>MongoDB 用 use+数据库名称的方式来创建数据库。</p><p>use 会创建一个新的数据库。</p><p>如果该数据库存在，则返回这个数据库。</p>



### 11、什么是非关系型数据库?
<p>非关系型数据库是对不同于传统关系型数据库的统称。</p><p>非关系型数据库的显著特 点是不使用 SQL 作为查询语言，数据存储不需要特定的表格模式。</p><p>由于简单的设计和非常好的性能所以被用于大数据和 Web Apps 等。</p>



### 12、为什么用 MOngoDB?
<ul><li>架构简单</li><li>没有复杂的连接</li><li>深度查询能力,MongoDB 支持动态查询。</li><li>容易调试</li><li>容易扩展</li><li>不需要转化/映射应用对象到数据库对象</li><li>使用内部内存作为存储工作区,以便更快的存取数据。</li></ul>



### 13、在哪些场景使用 MongoDB?
<ol><li>大数据</li><li>内容管理系统</li><li>移动端 Apps</li><li>数据管理</li></ol>



### 14、在 MongoDB 中如何创建一个新的数据库?
<p>MongoDB 用 use + 数据库名称的方式来创建数据库。</p><p>use 会创建一个新的数据库。</p><p>如果该数据库存在，则返回这个数据库。</p>



### 15、在 MongoDB 中如何查看数据库列表?
<p>使用命令"show dbs"</p>



### 16、MongoDB 中的分片是什么意思?
<p>分片是将数据水平切分到不同的物理节点。</p><p>当应用数据越来越大的时候，数据量也会越来越大。</p><p>当数据量增长时，单台机器有可能无法存储数据或可接受的读取写入吞吐量。</p><p>利用分片技术可以添加更多的机器来应对数据量增加以及读写操作 的要求。</p><p>&nbsp;</p><p>参考:https://docs.mongodb.com/manual/sharding/</p>



### 17、如何查看使用 MongoDB 的连接?
<p>如何查看使用 MongoDB 的连接 Sharding - MongoDB Manual21.如何查看使用 MongoDB 的连接</p><p>&nbsp;</p><p>使用命令"db.adminCommand(“connPoolStats”)"</p>



### 18、你说的 NoSQL 数据库是什么意思?NoSQL 与 RDBMS 直接有什么区别?为什么要使用和不使用 NoSQL 数据库?说一说 NoSQL 数据库的几个优点?
<p>NoSQL 是非关系型数据库，NoSQL = Not Only SQL。</p><p>关系型数据库采用的结构化的数据，NoSQL 采用的是键值对的方式存储数据。</p><p>在处理非结构化/半结构化的大数据时；在水平方向上进行扩展时;随时应对动态增加的数据项时可以优先考虑使用 NoSQL 数据库。</p><p>在考虑数据库的成熟度；支持；分析和商业智能；管理及专业性等问题时，应优先考虑关系型数据库。</p>



### 19、MySQL 与 MongoDB 之间最基本的差别是什么?
<p>MySQL 和 MongoDB 两者都是免费开源的数据库。</p><p>MySQL 和 MongoDB 有许多基本差别包括数据的表示(data representation)，查询，关系，事务，schema 的设计和定义，标准化(normalization)，速度和性能。</p><p>通过比较 MySQL 和 MongoDB，实际上我们是在比较关系型和非关系型数据库，即数据存储结构不同!</p>



### 20、MongoDB 成为最好 NoSQL 数据库的原因是什么?
<p>以下特点使得 MongoDB 成为最好的 NoSQL 数据库:</p><ul><li>面向文件的 </li><li>高性能</li><li>高可用性</li><li>易扩展性</li><li>丰富的查询语言</li></ul>



### 21、32 位系统上有什么细微差别?
<p>journaling 会激活额外的内存映射文件。</p><p>这将进一步抑制 32 位版本上的数据库大小。</p><p>因此，现在 journaling 在 32 位系统上默认是禁用的。</p>



### 22、journal 回放在条目(entry)不完整时(比如恰巧有一个中途故障了)会遇到问题吗?
<p>每个 journal (group)的写操作都是一致的，除非它是完整的否则在恢复过程中它不会回放。</p>



### 23、分析器在 MongoDB 中的作用是什么?
<p>MongoDB 中包括了一个可以显示数据库中每个操作性能特点的数据库分析器。</p><p>通过这个分析器你可以找到比预期慢的查询(或写操作);利用这一信息。</p><p>比如，可以确定是否需要添加索引。</p>



### 24、名字空间(namespace)是什么?
<p>MongoDB 存储 BSON 对象在丛集(collection)中。</p><p>数据库名字和丛集名字以句点连结起来叫做名字空间 (namespace)。</p>



### 25、如果用户移除对象的属性，该属性是否从存储层中删除?
<p>是的！</p><p>用户移除属性然后对象会重新保存(re-save())。</p>



### 26、能否使用日志特征进行安全备份?
<p>是的。</p>



### 27、允许空值 null 吗?
<p>对于对象成员而言，是的。</p><p>然而用户不能够添加空值(null)到数据库丛集(collection)因为空值不是对象。</p><p>用户能够添加空对象{}。</p>



### 28、更新操作立刻 fsync 到磁盘?
<p>不会，磁盘写操作默认是延迟执行的。</p><p>写操作可能在两三秒(默认在 60 秒内)后到达磁盘。</p><p>例如，如果一秒内数据库收到一千个对一个对象递增的操作，仅刷新磁盘一次。(注意，尽管 fsync 选项在命令行和经 过 getLastError_old 是有效的)</p>



### 29、如何执行事务/加锁?
<p>MongoDB 没有使用传统的锁或者复杂的带回滚的事务，因为它设计的宗旨是轻量，快速以及可预计的高性能。</p><p>可以把它类比成 MySQL MylSAM 的自动提交模式。</p><p>通过精简对事务的支持，性能得到了提升，特别是在一个可能会穿过多个服务器的系统里。</p>



### 30、为什么我的数据文件如此庞大?
<p>MongoDB 会积极的预分配预留空间来防止文件系统碎片。</p>



### 31、启用备份故障恢复需要多久?
<p>从备份数据库声明主数据库宕机到选出一个备份数据库作为新的主数据库将花费 10 到 30 秒时间。</p><p>这期间在主数据库上的操作将会失败--包括写入和强一致性读取(strong consistent read)操作。</p><p>然而，你还能在第二数据库上执行最终一致性查询(eventually consistent query)(在 slaveOk 模式下)，即使在这段时间里。</p>



### 32、什么是 master 或 primary?
<p>它是当前备份集群(replica set)中负责处理所有写入操作的主要节点/成员。</p><p>在一个备份集群中，当失效备援(failover)事件发生时，一个另外的成员会变成 primary。</p>



### 33、什么是 secondary 或 slave?
<p>Seconday 从当前的 primary 上复制相应的操作。</p><p>它是通过跟踪复制 oplog(local.oplog.rs)做到的。</p>



### 34、我必须调用 getLastError 来确保写操作生效了么?
<p>不用！</p><p>不管你有没有调用 getLastError(又叫"Safe Mode")服务器做的操作都一样。</p><p>调用 getLastError 只是为了确认写操作成功提交了。当然，你经常想得到确认，但是写操作的安全性和是否生效不是由这个决定的。</p>



### 35、我应该启动一个集群分片(sharded)还是一个非集群分片的 MongoDB 环境?
<p>为开发便捷起见，我们建议以非集群分片(unsharded)方式开始一个 MongoDB 环境，除非一台服务器不足以存放你的初始数据集。</p><p>从非集群分片升级到集群分片(sharding)是无缝的，所以在你的数据集还不 是很大的时候没必要考虑集群分片(sharding)。</p>



### 36、分片(sharding)和复制(replication)是怎样工作的?
<h5>每一个分片(shard)是一个分区数据的逻辑集合。分片可能由单一服务器或者集群组成，我们推荐为每一 个分片(shard)使用集群。</h5><p>&nbsp;</p><p>&nbsp;</p>



### 37、数据在什么时候才会扩展到多个分片(shard)里?
<p>MongoDB 分片是基于区域(range)的。</p><p>所以一个集合(collection)中的所有的对象都被存放到一个块 (chunk)中。</p><p>只有当存在多余一个块的时候，才会有多个分片获取数据的选项。</p><p>现在，每个默认块的大小 是 64Mb，所以你需要至少 64 Mb 空间才可以实施一个迁移。</p>



### 38、当我试图更新一个正在被迁移的块(chunk)上的文档时会发生什么?
<p>更新操作会立即发生在旧的分片(shard)上，然后更改才会在所有权转移(ownership transfers)前复制到新的分片上。</p>



### 39、如果在一个分片(shard)停止或者很慢的时候，我发起一个查询会怎样?
<p>如果一个分片(shard)停止了，除非查询设置了“Partial”选项，否则查询会返回一个错误。</p><p>如果一个分 片(shard)响应很慢，MongoDB 则会等待它的响应。</p>



### 40、我可以把 moveChunk 目录里的旧文件删除吗?
<p>没问题，这些文件是在分片(shard)进行均衡操作(balancing)的时候产生的临时文件。</p><p>一旦这些操作已经完成，相关的临时文件也应该被删除掉。</p><p>但目前清理工作是需要手动的，所以请小心地考虑再释放这些文 件的空间。</p>



### 41、我怎么查看 Mongo 正在使用的链接?
<p>db._adminCommand("connPoolStats");</p>



### 42、如果块移动操作(moveChunk)失败了，我需要手动清除部分转移的文档吗?
<p>不需要！</p><p>移动操作是一致(consistent)并且是确定性的(deterministic);</p><p>一次失败后，移动操作会不断重试;</p><p>当完成后，数据只会出现在新的分片里(shard)。</p>



### 43、果我在使用复制技术(replication)，可以一部分使用日志(journaling)而其他部分则不使用吗?
<p>可以。</p>



### 44、当更新一个正在被迁移的块(Chunk)上的文档时会发生什么?
<h4>更新操作会立即发生在旧的块(Chunk)上，然后更改才会在所有权转移前复制到新的分片上。</h4><p>&nbsp;</p>



### 45、MongoDB 在 A:{B,C}上建立索引，查询 A:{B,C}和 A:{C,B}都会使用索引吗?
<p>不会，只会在 A:{B,C}上使用索引。</p>



### 46、如果一个分片(Shard)停止或很慢的时候，发起一个查询会怎样?
<p>如果一个分片停止了，除非查询设置了“Partial”选项，否则查询会返回一个错误。</p><p>如果一个分片响应很慢，MongoDB 会等待它的响应。</p>



### 47、MongoDB 支持存储过程吗?如果支持的话，怎么用?
<p>MongoDB 支持存储过程，它是 javascript 写的，保存在 db.system.js 表中。</p>



### 48、如何理解 MongoDB 中的 GridFS 机制，MongoDB 为何使用 GridFS 来存储文件?
<p>GridFS 是一种将大型文件存储在 MongoDB 中的文件规范。</p><p>使用 GridFS 可以将大文件分隔成多个小文 档存放，这样我们能够有效的保存大文档，而且解决了 BSON 对象有限制的问题。</p>


